# VS Code Editor Technique

Visual Studio Code 使用技巧(Windows)

## 1. 常用快捷键(keyboard shortcuts)

http://www.52cik.com/vscode-keyboard-shortcuts/

| 快捷键            | 命令              |
| ----------------- | ----------------- |
| Ctrl+Shift+P,F1   | 显示命令面板      |
| Ctrl+P            | 快速打开          |
| Ctrl+Shift+N      | 新建窗口/实例     |
| Ctrl+Shift+W      | 关闭窗口/实例     |
| Ctrl+X            | 剪切行 (空选定)   |
| Ctrl+C            | 复制行 (空选定)   |
| Alt+ ↑ / ↓        | 向上/向下移动行   |
| Shift+Alt + ↓ / ↑ | 向上/向下复制行   |
| Ctrl+Shift+K      | 删除行            |
| Ctrl+Enter        | 在下面插入行      |
| Ctrl+Shift+Enter  | 在上面插入行      |
| Ctrl+Shift+\      | 跳到匹配的括号    |
| Ctrl+K Ctrl+C     | 添加行注释        |
| Ctrl+K Ctrl+U     | 删除行注释        |
| Ctrl+/            | 切换行注释        |
| Shift+Alt+A       | 切换块注释        |
| Ctrl+F            | 查找              |
| Ctrl+H            | 替换              |
| F3 / Shift+F3     | 查找下一个/上一个 |
| Shift+Alt+F       | 格式化文件        |
| Ctrl+K Ctrl+F     | 格式化选定代码    |
| F12               | 转到定义          |
| Alt+F12           | Peek 定义         |
| Ctrl+K F12        | 打开定义到侧边    |
| Ctrl+`            | 显示集成终端      |
| Ctrl+Shift+`      | 新建集成终端      |
| Ctrl+N            | 新建文件          |

## 2. 界面概览(Interface overview)

![vs code 界面概览](http://otnjt3h06.bkt.clouddn.com/image/vscode-interface-overiew.png)

速记：

界面概览上所有快捷键以 `Ctrl` + `Shift` 开头，后面跟对应部件名称。

- 文件资源管理器(Explorer)  `E`
- 跨文件搜索(Search) `F` (Find)
- 源代码管理(Source Control) `G` (Git) 。这里需要注意，按完 `Ctrl` + `Shift` + `G` 组合键后，还需要单独在按一次 `G` 键。
- 启动和调试(Debug) `D`
- 管理扩展(Extensions) `X` 。发音像 Ex
- 查看作物和警告(View erros and warning) `M` (Manage)。调出命令终端也能查看。

## 3. 使用命令行(User Command Line)

1. 查看命令行支持的所有参数

```bash
code --help
```

2. 使用已经打开的窗口来打开文件

```bash
code -r filename
```

3. 打开文件并滚动到特定的行和列

```bash
code -r -g <filename:line[:character]>
```

4. 比较两个文件内容

```bash
code -r -d foo.txt bar.txt
```

5. 使用管道，将当前目录所有文件名展示在编辑器里

```bash
ls | code -f -
```



## 4. 双手不离键盘(Use Keyboard)

核心键盘操作：光标移动、文本选择、文本删除、为编辑器命令绑定快捷键

### 1. 光标移动

- 把光标移动到单词的开头或末尾：`Ctrl` + `←` 或 `→` 。
- 把光标移动到行首或行尾：`Home` 或 `End`
- 光标在括号间切换：`Ctrl` + `Shift` + `\`  或 `Ctrl` + `B`。前提是光标在括号的位置
- 移动到文档第一行或最后一行：`Ctrl` + `Home` 或 `End`

### 2. 文本选择

给以上命令多加一个 `Shift` 就可以达到选中光标跳转区间的所有文本。

### 3. 删除操作

- 删除光标后的所有字符：`Shift` + `Win` + `Delete`
- 删除光标前的所有字符：`Ctrl` + `Shift` + `Backspace`
- 删除单词内的字符：`Ctrl` + `Delete` 删除光标后的字符，`Ctrl` + `Backspace` 删除光标前的字符。
- 删除整行：`Ctrl` + `L`

### 4. 自定义快捷键

打开快捷键面板，搜索所要设置快捷键的命令名，也可以搜索快捷键，然后双击对应条目，在弹出界面上按下快捷键完成设置。

### 5. 一些有用的快捷键

- 整行代码上移或下移：`Ctrl` + `Shift` + `↑` /`↓` ，或 `Alt` + `↑`/`↓`
- 在上下行添加光标：`Ctrl` + `Alt` + `↑` 或 `↓`
- 选中括号内的内容：需要自定义设置，名称为 Select to Bracket

### 6. 进阶(Advanced)

- 删除整行代码：`Ctrl` + `Shift` + `K` 
- 剪切一行代码：`Ctrl` + `X`
- 在当前光标所在行下方或上方添加新行：`Ctrl`  + `Enter`，`Ctrl` + `Shift` + `Enter`
- 将当前行代码复制到上方或下方：`Alt` + `Shift` + `↑`/`↓`
- 注释一行代码： `Ctrl` + `/`
- 格式化代码：`Alt` + `Shift` + `F`
- 撤销光标移动：`Ctrl` + `U`

## 5. 多光标技巧(Multiple Cursors)

在代码中同时添加多个光标，实现同时在多处输入相同内容。

1. 使用鼠标添加

   按住键盘 `Alt` 键，在需要添加光标的位置点击鼠标左键，添加光标，完成光标添加后，输入内容。

2. 使用键盘添加

   使用 `Ctrl` + `Alt` + `↑` 或 `↓` 快捷键在当前光标所在位置上下行添加光标，然后通过 `Home` 键或 `End` 键将所有光标移动到行首或行尾，然后在移回到所有需要修改的位置。

   这种方法有局限性，如果要修改的代码位置，无论从各行行首还是行尾算起都不在相同位置，就无法使用这种方式。

其他命令

1. 针对多次出现相同字符：`Ctrl` + `D` 

   首先将光标移动到第一个字符前，按下 `Ctrl` + `D` ，第一个字符被选中，再次按下 `Ctrl` + `D`  第二个相同字符被选中，并在第二个字符前创建光标，重复 `Ctrl` + `D` 命令，完成对所有相同字符创建光标。 

2. 在行尾创建光标：`Alt` + `Shift` + `I`

   首先选中多行代码，按下 `Alt` + `Shift` + `I` ，则会在所有被选中行尾创建光标。

## 6. 文件、符号、代码跳转(Jump)

### 1. 文件跳转

- 在已打开文件间跳转：`Ctrl` + `Tab`

  按下 `Ctrl` + `Tab` 键会打开一个已打开文件列表，按住 `Ctrl` 键不放，不断的按 `Tab` 键在文件列表中跳转，松开 `Ctrl` 键打开选中文件。

- 搜索跳转：`Ctrl` + `P`

  按下 `Ctrl` + `P` 会弹出最近打开文件列表，同时有一个搜索框，通过在搜索框中输入文件名，能快速在当前项目中搜索文件，按 `Enter` 键打开当前文件，按 `Ctrl` + `Enter` 会在新的编辑窗口中打开当前文件。

### 2. 行跳转

想要快速跳转到当前打开文件某一行，按下 `Ctrl` + `G` ，在输入框中输入行号按 `Enter` 键。

在文件跳转时，按下 `Ctrl` + `P` 弹出搜索框后，输入文件名并在文件名后加 `:` + `行号` 实现打开文件时将光标直接跳转到目标行。

### 3. 符号(Symbols)跳转

这里的符号表示所有的类、行数、标识符。

按下 `Ctrl` + `Shift` + `O` 显示当前文件所有符号列表。

函数定义与实现跳转：通用按键是 `F12` 和 `Ctrl` + `F12` 

- `F12` 跳转到函数定义
- `Ctrl` + `F12` 跳转到函数实现

函数引用： `Shift` + `F12` ，通过该组合键打开一个引用列表。

## 7. 鼠标操作(Mouse Operate)

### 1. 文本选择

单击鼠标左键移动光标；双击左键选中当前光标下的单词，三击左键选中当前行，四击鼠标选中整个文档。

单击行号选中当前行；在某行上按住鼠标左键上下拖动，选中多行。

### 2. 文本编辑

将一段代码移动到其他位置，选中要移动的代码，按住鼠标左键，将代码移动到要移动的位置，松开鼠标。

将一段代码复制到其他位置，选中要移动的代码，按住鼠标左键同时按下 `Ctrl` 键，将代码复制到要复制到的位置，松开 `Ctrl` 键和鼠标左键。

### 3. 多光标

- 按下 `Alt` 键，在需要添加光标的位置添加光标
- 按下 `Alt` 键，按下鼠标左键并拖动，会在当前光标相同列添加多个光标
- 按下鼠标中键，在文档中拖出一个框，这个框中的代码会被选中，而且每一行被选中的代码，都有一个独立的光标

### 4. 悬停提示

普通悬停提示直接将鼠标放到方法、类、函数名上，即可看到其基础信息。

进阶悬停提示则是通过按下 `Ctrl` 键再讲鼠标放到方法、类、函数名上，可以看到其具体实现。

## 8. 自动补全、代码修复、重构

### 1. 自动补全

输入一个方法或对象名，接着输入一个 `.` 就可以调用自动补全功能，如果想要关闭自动补全则按下 `Esc` 键，再次调出可以通过打字方式调出，也可以通过按下 `Ctrl` + `Space`  组合键手动调出。

### 2. 代码修复

主要用在修复代码潜在问题，一般在编辑器窗口都会用绿色波浪线标出出现问题的代码，并且把鼠标移动到出现问题的地方时，会有一个黄色的灯泡图标，点击灯泡图标会显示修复建议。当然也可以按下 `Ctrl` + `.` 来调出快速修复建议。

### 3. 重构

-  重命名类名、变量名、函数名：将光标放在其上，按下 `F2` 输入新名称即可
- 抽取一段代码转成一个单独的函数：选中那段代码，点击黄色灯泡图标或者按下 `Ctrl` + `.`，选择对应重构操作即可。

## 9. 代码片段(Code Snippet)

按下 `Ctrl` + `Shift` + `P` 调出命令框，输入“Configure User Snippet” 打开选择语言列表，搜索所有添加代码片段的语言，按 `Enter` 键打开该代码片段配置文件。

以 JavaScript 语言为例，一段代码片段由一下几个部分：

```javascript
{
    "Print to console": {
        "prefix": "log",
        "body": [
            "console.log('$1');",
            "$2"
        ],
        "description": "Log output to console"
    }
}
```

每个代码片段都是一个 json 文件，"Print to console" 是代码片段名称，"prefix" 是前缀属性，"body" 是内容属性，同时还包含一个非必须的描述属性 "description"。

"body" 里的内容由字符串数组构成，数组的每一位构成一行代码，$1 和 $2 是 Tab Stop，当我们按 Tab 键时光标会在 $1 和 $2 所在位置进行跳转。

除了上述 $1 和 $2 的写法，也可以写成 ${1:label},这样在 $1 的位置不光填入一个 Tab Stop 还会用 label 形成一个占位符，并且 label 是被选中状态，当我们用 Tab 键切换时，可以直接修改占位符内容。

## 10. 代码折叠、小地图、面包屑特性(Code Collapse,MiniMap,BreadCrumbs)

### 1. 代码折叠

折叠：`Ctrl` + `Shift` + `[`。折叠当前光标的**最内层、可以被折叠**的代码。

展开：`Ctrl` + `Shift` + `]`

递归折叠：`Alt` + `0`

递归展开：`Shift` + `Alt` + `0`

### 2. 小地图

设置小地图方法：

- 小地图代码渲染为色块：打开设置(Settings)，搜索“editor.minimap.renderCharacters”
- 小地图代码色块渲染字符数：打开设置(Settings)，搜索“editor.minimap.maxColumn”

### 3. 面包屑

类似于网页中的面包屑导航，显示目前代码在整个项目中的路径，默认是关闭的，打开方式是：

打开设置(Settings)，搜索"breadcrumbs.enabled"

## 11. 极速搜索(Search in Speed)

### 1. 单文件搜索

在单个文档中搜索代码的快捷键是 `Ctrl` + `F`。

可以打开文档直接按 `Ctrl` + `F` 输入要搜索的单词进行搜索；也可以先将光标放到要搜索的单词上再按 `Ctrl` + `F`，此时该单词会直接出现在搜索框中。

按 `F3` 正向在整个文档中查找要搜索的单词；按 `Shift` + `F3` 反向在整个文档中查找要搜索的单词。

搜索框右侧图标用法：

- 第一个图标 `Aa` 表示区分大小写(Case)搜索，选中情况下区分大小写，反之不区分。`Alt` + `C`
- 第二个图标 `Ab|` 表示全单词(Whole Word)匹配，选中则只匹配整个单词匹配项。快捷键 `Alt` + `W`
- 第三个图标 `.*` 表示正则表达式(Regular Expression)匹配，选中则使用 JavaScript 正则引擎进行匹配搜索。`Alt` + `R`

在设置中通过 “editor.find.autoFindInSelection” 关闭自动填充搜索关键词。

### 2. 单文件替换

点一下搜索框左侧小三角形即可打开文本替换，和 Office 操作一样。快捷键是 `Ctrl` + `H`

### 3. 多文件搜索和替换

调用多文件搜索通过点击编辑器左侧功能视图栏的“放大镜”按钮或用快捷键 `Ctrl` + `Shift` + `F` 调用。

搜索时可以配置“包含文件”和“排除文件”，通过点搜索栏下方的三个点图标进行配置，配置格式是 glob，[glob 参考](https://github.com/isLishude/blog/issues/63)。

替换的方式也是通过点搜索框左侧的小三角形打开。

### 4. 多文件搜索配置

在设置中搜索 “search” 关键字修改相关配置。